(self.webpackChunkmodules_menu=self.webpackChunkmodules_menu||[]).push([["views/menu"],{1581:function(e,t,l){"use strict";l.r(t);var a=l(2650),o=l.n(a),r=l(196),n=l.n(r)()(o());n.push([e.id,"\n.el-icon-picker[data-v-412a4944] {\r\n  height: 256px;\r\n  overflow-y: scroll;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-wrap: wrap;\n}\n.icon[data-v-412a4944] {\r\n  display: inline-block;\r\n  width: 20px;\r\n  height: 20px;\r\n  color: var(--el-text-color-regular);\r\n  font-size: 20px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  line-height: 45px;\r\n  margin: 5px;\n}\n.icon[data-v-412a4944]:hover {\r\n  color: var(--el-color-primary);\n}\n.icon-active[data-v-412a4944] {\r\n  color: var(--el-color-primary);\n}\r\n",""]),t.default=n},6023:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return f}});var a=l(520),o=l(5428);const r={class:"el-icon-picker"};var n={__name:"el-icon-picker",props:{modelValue:String},emits:["update:modelValue"],setup(e,{emit:t}){const{appContext:{app:{config:{globalProperties:l}}}}=(0,a.getCurrentInstance)(),o=t,n=(0,a.ref)();return(t,d)=>{const c=(0,a.resolveComponent)("el-input"),u=(0,a.resolveComponent)("el-popover");return(0,a.openBlock)(),(0,a.createBlock)(u,{trigger:"click",width:"500",placement:"bottom-start",ref_key:"iconSelect",ref:n},{reference:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{modelValue:e.modelValue,class:"w-50 m-2",placeholder:"请选择图标","prefix-icon":e.modelValue},null,8,["modelValue","prefix-icon"])])),default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",r,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(l).$icons,(t=>((0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)(t),{key:t,class:(0,a.normalizeClass)([t,"icon",{"icon-active":t===e.modelValue}]),onClick:e=>function(e){o("update:modelValue",e),n.value.hide()}(t)},null,8,["class","onClick"])))),128))])])),_:1},512)}}};l(3438);var d=(0,l(5540).Z)(n,[["__scopeId","data-v-412a4944"]]),c=l(35);const u={class:"page"},i={class:"search-box"},m={class:"right-tool"},p={class:"table-box"},s={class:"dialog-footer"};var f={__name:"menu",setup(e){const t=(0,a.ref)({name:"",type:""}),l=(0,a.reactive)({children:"children",label:"name",value:"id"});let r=(0,a.ref)({seq:0,icon:"",type:0,parentId:"-1",name:"",path:"",module:"",componentName:"",component:"",perms:"",target:0,isFrame:1,status:0,menuType:0});const n=(0,a.reactive)({name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],seq:[{required:!0,message:"请输入排序",trigger:"blur"}],menuType:[{required:!0,message:"请选择菜单分类",trigger:"blur"}],status:[{required:!0,message:"请选择菜单状态",trigger:"blur"}],target:[{required:!0,message:"请选择菜单打开方式",trigger:"blur"}],isFrame:[{required:!0,message:"请选择菜单是否为外链",trigger:"blur"}],path:[{required:!0,message:"请输入菜单地址",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]}),f=(0,a.ref)(),V=(0,a.ref)();let x=(0,a.ref)(!1),h=(0,a.ref)([]),C=(0,a.ref)(!1),N=(0,a.ref)(""),w=(0,a.ref)([]);function v(){var e;x.value=!0,(e=t.value,axios.post("/api/menu/list",e)).then((e=>{h.value=function(e,t,l,a,o){t=t||"id",l=l||"parentId",a=a||"children",o=o||Math.min.apply(Math,e.map((e=>e[l])))||0;const r=JSON.parse(JSON.stringify(e)),n=r.filter((e=>{let a=r.filter((a=>e[t]===a[l]));return a.length>0&&(e.children=a),e[l]===o}));return""!==n?n:e}(e.data,"id","parentId","children","-1"),w.value=[{id:"-1",name:"主类目",children:h.value}],x.value=!1}))}function k(e){N.value="添加菜单",C.value=!0,e&&e.id&&(r.value.parentId=e.id,r.value.type=e.type)}function _(){C.value=!1,y()}function y(){r.value={seq:0,icon:"",type:0,parentId:"-1",name:"",path:"",module:"",componentName:"",component:"",perms:"",target:0,isFrame:1,status:0,menuType:0},V.value.resetFields()}function g(){V.value.validate((e=>{var t;e&&(r.value.parentId||(r.value.parentId="-1"),(t=r.value,axios.post("/api/menu/addOrUpdate",t)).then((e=>{200===e.code?(c.z8.success("操作成功"),C.value=!1,y(),v()):c.z8.error(e.msg)})))}))}function b(){t.value={name:"",type:""},f.value.resetFields()}return v(),(e,y)=>{const B=(0,a.resolveComponent)("el-input"),T=(0,a.resolveComponent)("el-form-item"),U=(0,a.resolveComponent)("el-option"),q=(0,a.resolveComponent)("el-select"),F=(0,a.resolveComponent)("el-button"),I=(0,a.resolveComponent)("el-form"),z=(0,a.resolveComponent)("el-col"),E=(0,a.resolveComponent)("el-row"),j=(0,a.resolveComponent)("el-table-column"),D=(0,a.resolveComponent)("el-icon"),S=(0,a.resolveComponent)("el-tag"),M=(0,a.resolveComponent)("el-popconfirm"),O=(0,a.resolveComponent)("el-table"),R=(0,a.resolveComponent)("el-tree-select"),J=(0,a.resolveComponent)("el-radio"),Y=(0,a.resolveComponent)("el-radio-group"),Z=(0,a.resolveComponent)("el-input-number"),A=(0,a.resolveComponent)("el-dialog"),G=(0,a.resolveDirective)("loading");return(0,a.openBlock)(),(0,a.createElementBlock)("div",u,[(0,a.createElementVNode)("div",i,[(0,a.createVNode)(I,{inline:!0,model:t.value,class:"demo-form-inline",ref_key:"searchFormRef",ref:f},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"菜单名称"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{modelValue:t.value.name,"onUpdate:modelValue":y[0]||(y[0]=e=>t.value.name=e),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.createVNode)(T,{label:"菜单分类"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(q,{modelValue:t.value.type,"onUpdate:modelValue":y[1]||(y[1]=e=>t.value.type=e),placeholder:"请选择菜单分类",clearable:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(),(0,a.createBlock)(U,{key:0,label:"前台",value:0})),((0,a.openBlock)(),(0,a.createBlock)(U,{key:1,label:"后台",value:1}))])),_:1},8,["modelValue"])])),_:1}),(0,a.createVNode)(T,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(F,{type:"primary",onClick:v,icon:(0,a.unref)(o.olm)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("查询")])),_:1},8,["icon"]),(0,a.createVNode)(F,{icon:(0,a.unref)(o.hYj),onClick:b},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("重置")])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"])]),(0,a.createVNode)(E,{gutter:10,class:"mb8"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{span:1.5},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(F,{icon:(0,a.unref)(o.v37),type:"primary",plain:"",onClick:k},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("新增")])),_:1},8,["icon"])])),_:1}),(0,a.createElementVNode)("div",m,[(0,a.createVNode)(F,{icon:(0,a.unref)(o.hYj),circle:"",onClick:v},null,8,["icon"])])])),_:1}),(0,a.createElementVNode)("div",p,[(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(O,{data:(0,a.unref)(h),style:{width:"100%",height:"100%"},"row-key":"id"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(j,{prop:"name",label:"菜单名称",width:"240"}),(0,a.createVNode)(j,{prop:"icon",label:"图标",width:"180"},{default:(0,a.withCtx)((e=>[e.row.icon?((0,a.openBlock)(),(0,a.createBlock)(D,{key:0},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)(e.row.icon)))])),_:2},1024)):(0,a.createCommentVNode)("v-if",!0)])),_:1}),(0,a.createVNode)(j,{prop:"seq",label:"排序",width:"80"}),(0,a.createVNode)(j,{prop:"module",label:"所属模块","min-width":"150"}),(0,a.createVNode)(j,{prop:"path",label:"菜单地址","min-width":"150"}),(0,a.createVNode)(j,{prop:"component",label:"组件路径","min-width":"150"}),(0,a.createVNode)(j,{prop:"componentName",label:"组件名","min-width":"150"}),(0,a.createVNode)(j,{prop:"status",label:"状态",width:"80"},{default:(0,a.withCtx)((e=>[0===e.row.status?((0,a.openBlock)(),(0,a.createBlock)(S,{key:0,class:"ml-2",type:"success"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("开启")])),_:1})):((0,a.openBlock)(),(0,a.createBlock)(S,{key:1,class:"ml-2",type:"danger"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("关闭")])),_:1}))])),_:1}),(0,a.createVNode)(j,{prop:"type",label:"菜单分类",width:"80"},{default:(0,a.withCtx)((e=>[0===e.row.type?((0,a.openBlock)(),(0,a.createBlock)(S,{key:0,class:"ml-2",type:"success"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("前台")])),_:1})):((0,a.openBlock)(),(0,a.createBlock)(S,{key:1,class:"ml-2",type:"info"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("后台")])),_:1}))])),_:1}),(0,a.createVNode)(j,{label:"操作",width:"240",fixed:"right"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(F,{size:"small",type:"primary",link:"",icon:(0,a.unref)(o.I8b),onClick:t=>{return l=e.row,void(a=l.id,axios.get("/api/menu/get?id="+a)).then((e=>{r.value=e.data,N.value="修改菜单",C.value=!0}));var l,a}},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("修改")])),_:2},1032,["icon","onClick"]),(0,a.createVNode)(F,{size:"small",type:"primary",link:"",icon:(0,a.unref)(o.v37),onClick:t=>k(e.row)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("新增")])),_:2},1032,["icon","onClick"]),(0,a.createVNode)(M,{"confirm-button-text":"确认","cancel-button-text":"取消",icon:(0,a.unref)(o.cEj),"icon-color":"#626AEF",title:"确定要删除该菜单吗?",onConfirm:t=>{return l=e.row,void(a=l.id,axios.delete("/api/menu/del?id="+a)).then((e=>{200===e.code&&e.data?(c.z8.success("删除成功"),v()):c.z8.error(e.msg)}));var l,a}},{reference:(0,a.withCtx)((()=>[(0,a.createVNode)(F,{size:"small",type:"primary",link:"",icon:(0,a.unref)(o.HG3)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("删除")])),_:1},8,["icon"])])),_:2},1032,["icon","onConfirm"])])),_:1})])),_:1},8,["data"])),[[G,(0,a.unref)(x)]])]),(0,a.createCommentVNode)(" 新增/修改 "),(0,a.createVNode)(A,{modelValue:(0,a.unref)(C),"onUpdate:modelValue":y[16]||(y[16]=e=>(0,a.isRef)(C)?C.value=e:C=e),title:(0,a.unref)(N),width:"800px",draggable:""},{footer:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",s,[(0,a.createVNode)(F,{type:"primary",onClick:g},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("确 定")])),_:1}),(0,a.createVNode)(F,{onClick:_},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("取 消")])),_:1})])])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(I,{ref_key:"ruleFormRef",ref:V,model:(0,a.unref)(r),rules:n,"label-width":"120px",class:"demo-ruleForm","status-icon":""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"父级菜单",prop:"parentId"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(R,{modelValue:(0,a.unref)(r).parentId,"onUpdate:modelValue":y[2]||(y[2]=e=>(0,a.unref)(r).parentId=e),data:(0,a.unref)(w),props:l,"check-strictly":"","render-after-expand":!1,style:{width:"100%"},clearable:""},null,8,["modelValue","data","props"])])),_:1}),(0,a.createVNode)(T,{label:"菜单类型",prop:"menuType"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Y,{modelValue:(0,a.unref)(r).menuType,"onUpdate:modelValue":y[3]||(y[3]=e=>(0,a.unref)(r).menuType=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(J,{label:0},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("目录")])),_:1}),(0,a.createVNode)(J,{label:1},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("菜单")])),_:1}),(0,a.createVNode)(J,{label:2},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("按钮")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.createVNode)(E,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"菜单名称",prop:"name"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{modelValue:(0,a.unref)(r).name,"onUpdate:modelValue":y[4]||(y[4]=e=>(0,a.unref)(r).name=e),placeholder:"请输入菜单名称"},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.createVNode)(z,{xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"菜单分类",prop:"type"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Y,{modelValue:(0,a.unref)(r).type,"onUpdate:modelValue":y[5]||(y[5]=e=>(0,a.unref)(r).type=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(J,{label:0},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("前台")])),_:1}),(0,a.createVNode)(J,{label:1},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("后台")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),0===(0,a.unref)(r).menuType||1===(0,a.unref)(r).menuType?((0,a.openBlock)(),(0,a.createBlock)(z,{key:0,xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"菜单图标",prop:"icon"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{modelValue:(0,a.unref)(r).icon,"onUpdate:modelValue":y[6]||(y[6]=e=>(0,a.unref)(r).icon=e)},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.createCommentVNode)("v-if",!0),(0,a.createVNode)(z,{xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"菜单排序",prop:"seq"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Z,{modelValue:(0,a.unref)(r).seq,"onUpdate:modelValue":y[7]||(y[7]=e=>(0,a.unref)(r).seq=e),min:0,max:9999,"controls-position":"right",placeholder:"菜单排序"},null,8,["modelValue"])])),_:1})])),_:1}),1===(0,a.unref)(r).menuType?((0,a.openBlock)(),(0,a.createBlock)(z,{key:1,xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"菜单地址",prop:"path"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{modelValue:(0,a.unref)(r).path,"onUpdate:modelValue":y[8]||(y[8]=e=>(0,a.unref)(r).path=e),placeholder:"请输入菜单地址"},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.createCommentVNode)("v-if",!0),1===(0,a.unref)(r).menuType?((0,a.openBlock)(),(0,a.createBlock)(z,{key:2,xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"所属模块",prop:"module"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{modelValue:(0,a.unref)(r).module,"onUpdate:modelValue":y[9]||(y[9]=e=>(0,a.unref)(r).module=e),placeholder:"请输入所属模块"},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.createCommentVNode)("v-if",!0),1===(0,a.unref)(r).menuType?((0,a.openBlock)(),(0,a.createBlock)(z,{key:3,xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"组件名称",prop:"componentName"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{modelValue:(0,a.unref)(r).componentName,"onUpdate:modelValue":y[10]||(y[10]=e=>(0,a.unref)(r).componentName=e),placeholder:"请输入组件名称"},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.createCommentVNode)("v-if",!0),1===(0,a.unref)(r).menuType?((0,a.openBlock)(),(0,a.createBlock)(z,{key:4,xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"组件路径",prop:"component"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{modelValue:(0,a.unref)(r).component,"onUpdate:modelValue":y[11]||(y[11]=e=>(0,a.unref)(r).component=e),placeholder:"请输入组件路径"},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.createCommentVNode)("v-if",!0),1===(0,a.unref)(r).menuType||2===(0,a.unref)(r).menuType?((0,a.openBlock)(),(0,a.createBlock)(z,{key:5,xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"权限标识",prop:"perms"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{modelValue:(0,a.unref)(r).perms,"onUpdate:modelValue":y[12]||(y[12]=e=>(0,a.unref)(r).perms=e),placeholder:"请输入权限标识"},null,8,["modelValue"])])),_:1})])),_:1})):(0,a.createCommentVNode)("v-if",!0),1===(0,a.unref)(r).menuType?((0,a.openBlock)(),(0,a.createBlock)(z,{key:6,xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"打开方式",prop:"target"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Y,{modelValue:(0,a.unref)(r).target,"onUpdate:modelValue":y[13]||(y[13]=e=>(0,a.unref)(r).target=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(J,{label:0},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("本页")])),_:1}),(0,a.createVNode)(J,{label:1},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("新窗口")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,a.createCommentVNode)("v-if",!0),1===(0,a.unref)(r).menuType?((0,a.openBlock)(),(0,a.createBlock)(z,{key:7,xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"是否外链",prop:"isFrame"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Y,{modelValue:(0,a.unref)(r).isFrame,"onUpdate:modelValue":y[14]||(y[14]=e=>(0,a.unref)(r).isFrame=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(J,{label:0},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("是")])),_:1}),(0,a.createVNode)(J,{label:1},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,a.createCommentVNode)("v-if",!0),(0,a.createVNode)(z,{xs:24,sm:24,md:12,lg:12,xl:12},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{label:"菜单状态",prop:"status"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Y,{modelValue:(0,a.unref)(r).status,"onUpdate:modelValue":y[15]||(y[15]=e=>(0,a.unref)(r).status=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(J,{label:0},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("开启")])),_:1}),(0,a.createVNode)(J,{label:1},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("关闭")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}},3438:function(e,t,l){var a=l(1581);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,l(950).Z)("1f0eaaba",a,!1,{})},520:function(e,t,l){e.exports=l(805)(6384)}}]);